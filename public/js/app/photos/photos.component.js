"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require("@angular/core");
var photos_service_1 = require("./photos.service");
var router_1 = require("@angular/router");
var PhotosComponent = (function () {
    function PhotosComponent(router, _photoService) {
        this.router = router;
        this._photoService = _photoService;
        this.progressPhoto = 0;
        this.showPhoto1 = true;
        this.showPhoto2 = false;
        this.showPhoto3 = false;
        this.showPhoto4 = false;
        this.showPhoto5 = false;
    }
    PhotosComponent.prototype.upload = function () {
        this.progressPhoto = this.progressPhoto + 20;
        if (this.progressPhoto == 100) {
            this.router.navigate(['/profile']);
        }
    };
    PhotosComponent.prototype.fileChangeEvent = function (fileInput) {
        console.log('fileChangeEvent');
        console.log(fileInput.target.files);
        var objectURL = window.URL.createObjectURL(fileInput.target.files[0]);
        console.log(objectURL);
        console.log('apres');
        this.data = objectURL;
    };
    PhotosComponent = __decorate([
        core_1.Component({
            selector: 'upload-photo',
            template: "\n                <progress class=\"progress progress-danger\" [attr.value]=\"progressPhoto\" max=\"100\" aria-describedby=\"example-caption-1\"></progress>\n                <div class=\"panel panel-default\" *ngIf=\"showPhoto1\">\n                    <form method=\"post\" enctype=\"multipart/form-data\">\n                        <div>\n                            <img height=\"300\" width=\"360\" src=\"/images/modele/photo1.jpg\">\n                        </div>\n                        <div>\n                            \n                            <input type=\"file\" class=\"btn btn-primary btn-primary-custom\"  (change)=\"fileChangeEvent($event)\" placeholder=\"Upload file...\">\n                            <button type=\"button\" (click)=\"upload(); this.showPhoto2 = true; this.showPhoto1 = false;\" class=\"btn btn-primary btn-primary-custom\">Upload</button>    \n                       </div>\n                   </form>\n                </div>\n                <div class=\"panel panel-default\" *ngIf=\"showPhoto2\">\n                    <form method=\"post\" enctype=\"multipart/form-data\">\n                        <div>\n                            <img height=\"300\" width=\"360\" src=\"/images/modele/photo2.jpg\">\n                        </div>\n                       <div>\n                            <input type=\"file\" (change)=\"fileChangeEvent($event)\" placeholder=\"Upload file...\" class=\"btn btn-primary btn-primary-custom\">\n                            <button type=\"button\" (click)=\"upload();this.showPhoto3 = true; this.showPhoto2 = false;\" class=\"btn btn-primary btn-primary-custom\">Upload</button>\n                       </div>\n                       </form>\n                </div>\n                <div class=\"panel panel-default\" *ngIf=\"showPhoto3\">\n                    <form method=\"post\" enctype=\"multipart/form-data\">\n                        <div>\n                            <img height=\"300\" width=\"360\" src=\"/images/modele/photo3.jpg\">\n                        </div>\n                       <div>\n                            <input type=\"file\" (change)=\"fileChangeEvent($event)\" placeholder=\"Upload file...\" class=\"btn btn-primary btn-primary-custom\">\n                            <button type=\"button\" (click)=\"upload();this.showPhoto4 = true; this.showPhoto3 = false;\" class=\"btn btn-primary btn-primary-custom\">Upload</button>\n                       </div>\n                       </form>\n                </div>\n                <div class=\"panel panel-default\" *ngIf=\"showPhoto4\">\n                    <form method=\"post\" enctype=\"multipart/form-data\">\n                        <div>\n                            <img height=\"300\" width=\"360\" src=\"/images/modele/photo4.jpg\">\n                        </div>\n                       <div>\n                            <input type=\"file\" (change)=\"fileChangeEvent($event)\" placeholder=\"Upload file...\" class=\"btn btn-primary btn-primary-custom\">\n                            <button type=\"button\" (click)=\"upload();this.showPhoto5 = true; this.showPhoto4 = false;\" class=\"btn btn-primary btn-primary-custom\">Upload</button>\n                       </div>\n                       </form>\n                </div>\n                                <div class=\"panel panel-default\" *ngIf=\"showPhoto5\">\n                    <form method=\"post\" enctype=\"multipart/form-data\">\n                        <div>\n                            <img height=\"300\" width=\"360\" src=\"/images/modele/photo5.jpg\">\n                        </div>\n                       <div>\n                            <input type=\"file\" (change)=\"fileChangeEvent($event)\" placeholder=\"Upload file...\" class=\"btn btn-primary btn-primary-custom\">\n                            <button type=\"button\" (click)=\"upload()\" class=\"btn btn-primary btn-primary-custom\">Upload</button>\n                       </div>\n                       </form>\n                </div>\n               <!--<div>-->\n                    <!--<input type=\"file\" (change)=\"fileChangeEvent($event)\" placeholder=\"Upload file...\">-->\n               <!--</div>-->\n               <!---->\n               <div >\n               <!--<input type=\"submit\"/>-->\n                \n               </div>\n               \n        <!--ngFileSelect-->\n       <!--[options]=\"basicOptions\"-->\n    <!--(onUpload)=\"handleUpload($event)\">-->\n ><br>\n<nav>\n    <div><a [routerLink]=\"['/profile']\"> SUIVANT </a></div>\n</nav>\n\n"
        }), 
        __metadata('design:paramtypes', [router_1.Router, photos_service_1.PhotosService])
    ], PhotosComponent);
    return PhotosComponent;
}());
exports.PhotosComponent = PhotosComponent;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBob3Rvcy9waG90b3MuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxxQkFBZ0MsZUFBZSxDQUFDLENBQUE7QUFDaEQsK0JBQTRCLGtCQUFrQixDQUFDLENBQUE7QUFDL0MsdUJBQXFCLGlCQUFpQixDQUFDLENBQUE7QUEyRnZDO0lBWUkseUJBQW9CLE1BQWMsRUFBUyxhQUE2QjtRQUFwRCxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBQVMsa0JBQWEsR0FBYixhQUFhLENBQWdCO1FBVnhFLGtCQUFhLEdBQUcsQ0FBQyxDQUFDO1FBRWxCLGVBQVUsR0FBWSxJQUFJLENBQUM7UUFDM0IsZUFBVSxHQUFZLEtBQUssQ0FBQztRQUM1QixlQUFVLEdBQVksS0FBSyxDQUFDO1FBQzVCLGVBQVUsR0FBWSxLQUFLLENBQUM7UUFDNUIsZUFBVSxHQUFZLEtBQUssQ0FBQztJQUs1QixDQUFDO0lBRUQsZ0NBQU0sR0FBTjtRQUNJLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUM7UUFFN0MsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsSUFBSSxHQUFHLENBQUMsQ0FBQSxDQUFDO1lBRXBCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztRQUNyQyxDQUFDO0lBWWQsQ0FBQztJQWlCRCx5Q0FBZSxHQUFmLFVBQWdCLFNBQWM7UUFDMUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ3ZDLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM1QixJQUFJLFNBQVMsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RFLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDdkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUU3QixJQUFJLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQztJQUdsQixDQUFDO0lBakpMO1FBQUMsZ0JBQVMsQ0FBQztZQUNQLFFBQVEsRUFBRSxjQUFjO1lBQ3hCLFFBQVEsRUFBRSxrK0lBMkViO1NBTUEsQ0FBQzs7dUJBQUE7SUFzR0Ysc0JBQUM7QUFBRCxDQXBHQSxBQW9HQyxJQUFBO0FBcEdZLHVCQUFlLGtCQW9HM0IsQ0FBQSIsImZpbGUiOiJwaG90b3MvcGhvdG9zLmNvbXBvbmVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q29tcG9uZW50LCBPbkluaXR9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQge1Bob3Rvc1NlcnZpY2V9IGZyb20gXCIuL3Bob3Rvcy5zZXJ2aWNlXCI7XG5pbXBvcnQge1JvdXRlcn0gZnJvbSBcIkBhbmd1bGFyL3JvdXRlclwiO1xuXG5cbi8vaW1wb3J0IHtPYnNlcnZhYmxlfSBmcm9tIFwiLi4vLi4vLi4vcHVibGljL2pzL3ZlbmRvci9yeGpzL3NyYy9PYnNlcnZhYmxlXCI7XG4vL2ltcG9ydCB7Tmdab25lfSBmcm9tIFwiLi4vLi4vLi4vcHVibGljL2pzL3ZlbmRvci9AYW5ndWxhci9jb3JlL2VzbS9zcmMvem9uZS9uZ196b25lXCI7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAndXBsb2FkLXBob3RvJyxcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgICAgICAgICAgIDxwcm9ncmVzcyBjbGFzcz1cInByb2dyZXNzIHByb2dyZXNzLWRhbmdlclwiIFthdHRyLnZhbHVlXT1cInByb2dyZXNzUGhvdG9cIiBtYXg9XCIxMDBcIiBhcmlhLWRlc2NyaWJlZGJ5PVwiZXhhbXBsZS1jYXB0aW9uLTFcIj48L3Byb2dyZXNzPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbCBwYW5lbC1kZWZhdWx0XCIgKm5nSWY9XCJzaG93UGhvdG8xXCI+XG4gICAgICAgICAgICAgICAgICAgIDxmb3JtIG1ldGhvZD1cInBvc3RcIiBlbmN0eXBlPVwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGhlaWdodD1cIjMwMFwiIHdpZHRoPVwiMzYwXCIgc3JjPVwiL2ltYWdlcy9tb2RlbGUvcGhvdG8xLmpwZ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZmlsZVwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1wcmltYXJ5LWN1c3RvbVwiICAoY2hhbmdlKT1cImZpbGVDaGFuZ2VFdmVudCgkZXZlbnQpXCIgcGxhY2Vob2xkZXI9XCJVcGxvYWQgZmlsZS4uLlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIChjbGljayk9XCJ1cGxvYWQoKTsgdGhpcy5zaG93UGhvdG8yID0gdHJ1ZTsgdGhpcy5zaG93UGhvdG8xID0gZmFsc2U7XCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgYnRuLXByaW1hcnktY3VzdG9tXCI+VXBsb2FkPC9idXR0b24+ICAgIFxuICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsIHBhbmVsLWRlZmF1bHRcIiAqbmdJZj1cInNob3dQaG90bzJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGZvcm0gbWV0aG9kPVwicG9zdFwiIGVuY3R5cGU9XCJtdWx0aXBhcnQvZm9ybS1kYXRhXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgaGVpZ2h0PVwiMzAwXCIgd2lkdGg9XCIzNjBcIiBzcmM9XCIvaW1hZ2VzL21vZGVsZS9waG90bzIuanBnXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiAoY2hhbmdlKT1cImZpbGVDaGFuZ2VFdmVudCgkZXZlbnQpXCIgcGxhY2Vob2xkZXI9XCJVcGxvYWQgZmlsZS4uLlwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1wcmltYXJ5LWN1c3RvbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIChjbGljayk9XCJ1cGxvYWQoKTt0aGlzLnNob3dQaG90bzMgPSB0cnVlOyB0aGlzLnNob3dQaG90bzIgPSBmYWxzZTtcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBidG4tcHJpbWFyeS1jdXN0b21cIj5VcGxvYWQ8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWwgcGFuZWwtZGVmYXVsdFwiICpuZ0lmPVwic2hvd1Bob3RvM1wiPlxuICAgICAgICAgICAgICAgICAgICA8Zm9ybSBtZXRob2Q9XCJwb3N0XCIgZW5jdHlwZT1cIm11bHRpcGFydC9mb3JtLWRhdGFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBoZWlnaHQ9XCIzMDBcIiB3aWR0aD1cIjM2MFwiIHNyYz1cIi9pbWFnZXMvbW9kZWxlL3Bob3RvMy5qcGdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZmlsZVwiIChjaGFuZ2UpPVwiZmlsZUNoYW5nZUV2ZW50KCRldmVudClcIiBwbGFjZWhvbGRlcj1cIlVwbG9hZCBmaWxlLi4uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgYnRuLXByaW1hcnktY3VzdG9tXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgKGNsaWNrKT1cInVwbG9hZCgpO3RoaXMuc2hvd1Bob3RvNCA9IHRydWU7IHRoaXMuc2hvd1Bob3RvMyA9IGZhbHNlO1wiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1wcmltYXJ5LWN1c3RvbVwiPlVwbG9hZDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbCBwYW5lbC1kZWZhdWx0XCIgKm5nSWY9XCJzaG93UGhvdG80XCI+XG4gICAgICAgICAgICAgICAgICAgIDxmb3JtIG1ldGhvZD1cInBvc3RcIiBlbmN0eXBlPVwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGhlaWdodD1cIjMwMFwiIHdpZHRoPVwiMzYwXCIgc3JjPVwiL2ltYWdlcy9tb2RlbGUvcGhvdG80LmpwZ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgKGNoYW5nZSk9XCJmaWxlQ2hhbmdlRXZlbnQoJGV2ZW50KVwiIHBsYWNlaG9sZGVyPVwiVXBsb2FkIGZpbGUuLi5cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBidG4tcHJpbWFyeS1jdXN0b21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiAoY2xpY2spPVwidXBsb2FkKCk7dGhpcy5zaG93UGhvdG81ID0gdHJ1ZTsgdGhpcy5zaG93UGhvdG80ID0gZmFsc2U7XCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgYnRuLXByaW1hcnktY3VzdG9tXCI+VXBsb2FkPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbCBwYW5lbC1kZWZhdWx0XCIgKm5nSWY9XCJzaG93UGhvdG81XCI+XG4gICAgICAgICAgICAgICAgICAgIDxmb3JtIG1ldGhvZD1cInBvc3RcIiBlbmN0eXBlPVwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGhlaWdodD1cIjMwMFwiIHdpZHRoPVwiMzYwXCIgc3JjPVwiL2ltYWdlcy9tb2RlbGUvcGhvdG81LmpwZ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgKGNoYW5nZSk9XCJmaWxlQ2hhbmdlRXZlbnQoJGV2ZW50KVwiIHBsYWNlaG9sZGVyPVwiVXBsb2FkIGZpbGUuLi5cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBidG4tcHJpbWFyeS1jdXN0b21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiAoY2xpY2spPVwidXBsb2FkKClcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBidG4tcHJpbWFyeS1jdXN0b21cIj5VcGxvYWQ8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgIDwhLS08ZGl2Pi0tPlxuICAgICAgICAgICAgICAgICAgICA8IS0tPGlucHV0IHR5cGU9XCJmaWxlXCIgKGNoYW5nZSk9XCJmaWxlQ2hhbmdlRXZlbnQoJGV2ZW50KVwiIHBsYWNlaG9sZGVyPVwiVXBsb2FkIGZpbGUuLi5cIj4tLT5cbiAgICAgICAgICAgICAgIDwhLS08L2Rpdj4tLT5cbiAgICAgICAgICAgICAgIDwhLS0tLT5cbiAgICAgICAgICAgICAgIDxkaXYgPlxuICAgICAgICAgICAgICAgPCEtLTxpbnB1dCB0eXBlPVwic3VibWl0XCIvPi0tPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICBcbiAgICAgICAgPCEtLW5nRmlsZVNlbGVjdC0tPlxuICAgICAgIDwhLS1bb3B0aW9uc109XCJiYXNpY09wdGlvbnNcIi0tPlxuICAgIDwhLS0ob25VcGxvYWQpPVwiaGFuZGxlVXBsb2FkKCRldmVudClcIj4tLT5cbiA+PGJyPlxuPG5hdj5cbiAgICA8ZGl2PjxhIFtyb3V0ZXJMaW5rXT1cIlsnL3Byb2ZpbGUnXVwiPiBTVUlWQU5UIDwvYT48L2Rpdj5cbjwvbmF2PlxuXG5gXG5cbiAgICAvL1xuICAgIC8vIDxkaXY+XG4gICAgLy8gICBSZXNwb25zZToge3sgcmVzcG9uc2UgfCBqc29uIH19XG4gICAgLy8gPC9kaXY+YFxufSlcblxuZXhwb3J0IGNsYXNzIFBob3Rvc0NvbXBvbmVudCAge1xuXG4gICAgcHJvZ3Jlc3NQaG90byA9IDA7XG5cbiAgICBzaG93UGhvdG8xOiBib29sZWFuID0gdHJ1ZTtcbiAgICBzaG93UGhvdG8yOiBib29sZWFuID0gZmFsc2U7XG4gICAgc2hvd1Bob3RvMzogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHNob3dQaG90bzQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBzaG93UGhvdG81OiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBkYXRhOiBhbnk7XG4gICAgZmlsZXNUb1VwbG9hZDogRmlsZTtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJvdXRlcjogUm91dGVyLCBwdWJsaWMgX3Bob3RvU2VydmljZSA6IFBob3Rvc1NlcnZpY2UpIHtcbiAgICB9XG5cbiAgICB1cGxvYWQoKSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NQaG90byA9IHRoaXMucHJvZ3Jlc3NQaG90byArIDIwO1xuXG4gICAgICAgIGlmICh0aGlzLnByb2dyZXNzUGhvdG8gPT0gMTAwKXtcbiAgICAgICAgICAgICAgICAgICAgLy9ST09UIFZFUlMgTEEgUEFHRSBTVUlWQU5URVxuICAgICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFsnL3Byb2ZpbGUnXSk7XG4gICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgLy8gdGhpcy5fcGhvdG9TZXJ2aWNlLnVwbG9hZCh0aGlzLmRhdGEpXG4gICAgICAgICAvLyAgICAgLnN1YnNjcmliZVxuICAgICAgICAgLy8gICAgKFxuICAgICAgICAgLy8gICAgICAgICBsb2FkX2ltYWdlID0+IHtcbiAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxvYWRfaW1hZ2UpO1xuICAgICAgICAgLy8gICAgICAgICB9LFxuICAgICAgICAgLy8gICAgICAgICBlcnJvciA9PiB7XG4gICAgICAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInVuZSBlcnJldXIgcydlc3QgcHJvZHVpdGVcIik7XG4gICAgICAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikgfVxuICAgICAgICAgLy8gICAgKTtcbiAgICB9XG5cbiAgICAgICAgLy8gcmV0dXJuIHRoaXMuX2h0dHAucG9zdCgnaHR0cHM6Ly9teXNhdmVyLmhlcm9rdWFwcC5jb20vZGVtYW5kLycpXG4gICAgICAgIC8vICAgICAubWFwKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgLy8gICAgIC5jYXRjaChlcnJvciA9PiBPYnNlcnZhYmxlLnRocm93KGVycm9yLmpzb24oKSkpO1xuXG4gICAgICAgIC8vIHRoaXMubWFrZUZpbGVSZXF1ZXN0KFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL3VwbG9hZFwiLCBbXSwgdGhpcy5maWxlc1RvVXBsb2FkKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgLy8gICAgICBpZiAodGhpcy5wcm9ncmVzc1Bob3RvID09IDEwMCl7XG4gICAgICAgIC8vICAgICAgICAgLy9ST09UIFZFUlMgTEEgUEFHRSBTVUlWQU5URVxuICAgICAgICAvLyAgICAgICAgICAvLyBbcm91dGVyTGlua10gPSAgXCJbJy9wcm9maWxlJ11cIjtcbiAgICAgICAgLy8gICAgICB9XG4gICAgICAgIC8vICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgLy8gIH0sIChlcnJvcikgPT4ge1xuICAgICAgICAvLyAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAvLyAgfSk7XG5cblxuICAgIGZpbGVDaGFuZ2VFdmVudChmaWxlSW5wdXQ6IGFueSl7XG4gICAgICAgIGNvbnNvbGUubG9nKCdmaWxlQ2hhbmdlRXZlbnQnKTtcbmNvbnNvbGUubG9nKGZpbGVJbnB1dC50YXJnZXQuZmlsZXMpO1xuICAgICAgICB2YXIgb2JqZWN0VVJMID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZUlucHV0LnRhcmdldC5maWxlc1swXSk7XG4gICAgICAgIGNvbnNvbGUubG9nKG9iamVjdFVSTCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdhcHJlcycpO1xuICAgIC8vICAgIHRoaXMuZmlsZXNUb1VwbG9hZCA9IDxGaWxlPiBmaWxlSW5wdXQudGFyZ2V0LmZpbGVzWzBdO1xudGhpcy5kYXRhID0gb2JqZWN0VVJMO1xuICAgICAgICAvL1NpIHBsdXNpZXVycyBmaWNoaWVyIMOgIHVwbG9hZGVyIGVuIG1lbWUgdGVtcHNcbiAgICAgICAgLy8gdGhpcy5maWxlc1RvVXBsb2FkLnB1c2goZmlsZUlucHV0LnRhcmdldC5maWxlc1swXSk7XG4gICAgfVxuXG4gICAgLy8gbWFrZUZpbGVSZXF1ZXN0KHVybDogc3RyaW5nLCBwYXJhbXM6IEFycmF5PHN0cmluZz4sIGZpbGVzOiBBcnJheTxGaWxlPikge1xuICAgIC8vICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIC8vICAgICAgICAgdmFyIGZvcm1EYXRhOiBhbnkgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAvLyAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAvLyAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xuICAgIC8vICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChcInVwbG9hZHNbXVwiLCBmaWxlc1tpXSwgZmlsZXNbaV0ubmFtZSk7XG4gICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2coZm9ybURhdGEpO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgIC8vICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PSAyMDApIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpKTtcbiAgICAvLyAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh4aHIucmVzcG9uc2UpO1xuICAgIC8vICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgfVxuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICAgICAgY29uc29sZS5sb2coZm9ybURhdGEpO1xuICAgIC8vICAgICAgICAgeGhyLm9wZW4oXCJQT1NUXCIsIHVybCwgdHJ1ZSk7XG4gICAgLy8gICAgICAgICB4aHIuc2VuZChmb3JtRGF0YSk7XG4gICAgLy8gICAgIH0pO1xuICAgIC8vIH1cbiAgICAvLyBwcml2YXRlIHpvbmU6IE5nWm9uZTtcbiAgICAvLyBwcml2YXRlIGJhc2ljT3B0aW9uczogT2JqZWN0O1xuICAgIC8vIHByaXZhdGUgcHJvZ3Jlc3M6IG51bWJlciA9IDA7XG4gICAgLy8gcHJpdmF0ZSByZXNwb25zZTogYW55ID0ge307XG4gICAgLy9cbiAgICAvLyBuZ09uSW5pdCgpIHtcbiAgICAvLyB0aGlzLnpvbmUgPSBuZXcgTmdab25lKHsgZW5hYmxlTG9uZ1N0YWNrVHJhY2U6IGZhbHNlfSk7XG4gICAgLy8gdGhpcy5iYXNpY09wdGlvbnMgPSB7IHVybDogJ2h0dHA6Ly9hcGkubmcyLXVwbG9hZGVyLmNvbToxMDA1MC91cGxvYWQnfTtcbiAgICAvLyB9XG4gICAgLy9cbiAgICAvLyBoYW5kbGVVcGxvYWQoZGF0YTogYW55KTogdm9pZCB7XG4gICAgLy8gICAgIHRoaXMuem9uZS5ydW4oKCkgPT4ge1xuICAgIC8vICAgICAgICAgdGhpcy5yZXNwb25zZSA9IGRhdGE7XG4gICAgLy8gICAgIH0pO1xuICAgIC8vIH1cblxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
